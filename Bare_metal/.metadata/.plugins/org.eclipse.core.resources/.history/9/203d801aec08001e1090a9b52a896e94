/**
 ******************************************************************************
 * @file           : main.c
 * @author         : Auto-generated by STM32CubeIDE
 * @brief          : Main program body
 ******************************************************************************
 * @attention
 *
 * Copyright (c) 2023 STMicroelectronics.
 * All rights reserved.
 *
 * This software is licensed under terms that can be found in the LICENSE file
 * in the root directory of this software component.
 * If no LICENSE file comes with this software, it is provided AS-IS.
 *
 ******************************************************************************
 */

#include "stm32g070xx.h"

void timer_config()
{
	RCC->APBENR1 = (1<<4);
	TIM6->PSC = 128;
	TIM6->ARR = 35000; //65535
	TIM6->CNT = 0;
	TIM6->CR1 = (1<<0);
}

void GPIOA_config()
{
	RCC-> IOPENR = (1<<0);
		GPIOA -> MODER |= (1<<10);
		GPIOA -> MODER &= ~(1<<11);
}

int main(void)
{
	GPIOA_config();
	timer_config();

	while(1)
	{
		while(!(TIM6->SR&(1<<0)));
		GPIOA->ODR ^= (1<<5);
		TIM6->SR &= ~(1<<0);
	}
}
